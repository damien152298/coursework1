<html>
    <head>
        <title>Vue.js Pet Store</title>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>

    <body>
        <div id="app">
            <header>
                <h1> {{ sitename }}</h1>
                <button @click='showCheckout'> 
                    {{cartItemCount}}
                <span class ="fa fa-cart-plus"></span> Checkout </button>
            </header>
            <main>
                <div v-if='showProduct'>
                <figure>
                    <img v-bind:src="product.image">
                </figure>
                <h2 v-text ="product.title"></h2>
                <p v-html ="product.description"></p>
                <p> Price {{ product.price }} </p>
                <!-- The button will display when 'Add to Cart is True -->
                <button @click='addToCart' v-if='canAddToCart'> Add to Cart </button>

                <!-- This button will be disabled otherwise -->
                <button disabled ='disabled' v-else>Add to Cart</button>
            </div>
            <div v-else>
                <h2>Checkout</h2>
                <p>
                    <strong>First Name:</strong>
                    <!-- This input field is bound to 'firstName' in the 'order' object -->
                    <input v-model.trim="order.firstName"/>
                </p>
                <p>
                    <strong> Last Name:</strong>
                    <!-- This input field is bound to 'lastName' in the 'order' object -->
                    <input v-model.trim="order.lastName"/>
                </p>
                <p>
                    <strong>Address:</strong> <input v-model='order.address' />
                </p>
                <p>
                    <strong>City:</strong><input v-model ='order.city'/>
                </p>

                <p>
                <strong>State</strong>
                <select v-model = 'order.state' class="form-control">
                    <option disabled value ="">State</option>
                    <option v-for="(state, key) in states" 
                    v-bind:value ="state">
                    {{state}}
                </option>
            </select>
            </p>

            <p><strong>Zip/ Postal Code</strong><input v-model.number ='order.zip' type="number"></p>

            <p> 
                <input type="checkbox" id="gift" value ="true" v-model="order.gift"
                v-bind:true-value="order.sendGift"
                v-bind:false-value="order.dontSendGift">
                <label for="gift"> Ship as Gift?</label>
            </p>

            <p>
                <input type="radio" id="home" value="Home" v-model="order.method">
                <label for="home">Home</label>
                
                <input type ="radio" id="business" value="Business" v-model="order.method">
                <label for="business">Business</label>
            </p>

                <h2>Order Information</h2>
                <p>First Name:{{order.firstName}}</p>
                <p>Last Name: {{order.lastName}}</p>
                <p>Address: {{order.address}}</p>
                <p>City: {{order.city}}</p>
                <p>Zip: {{order.zip}}</p>
                <p>State: {{order.state}}</p> 
                <p>Gift: {{order.gift}}</p>
                <p>Method: {{order.method}}</p>

                <button v-on:click="submitForm">Place Order</button> 
            </div>
            </main>
        </div>
    </body>

    <script>
        var webstore = new Vue({
            el: '#app',
            data: {
                showProduct: true,
                sitename: 'Pet Store',
                store: [], // array to store items in shopping cart,
                states: ['Alabama', 'Arizona', 'Alaska', 'California', 'Nevada'],
                order: {
                    firstName: "",
                    lastName: "",
                    address: "",
                    city:"",
                    state:"",
                    zip:"",
                    method:'Home',
                    gift: '',
                    sendGift: 'Send as a gift',
                    dontSendGift: 'Do not send as a gift'
                },
                product: {
                    id: 1001,
                    title: "Cat food",
                    description: "5kg bag of <b> irrestible </b> cat food",
                    price: 20,
                    image: "images/product-fullsize.png",
                    availableInventory: 5
                },
            },
            methods:{
                addToCart: function () {
                    console.log('test');
                    console.log(this.store);
                    this.store.push(this.product.id);
                },
                showCheckout: function(){
                    this.showProduct = this.showProduct ? false : true;
                },
                submitForm(){
                    alert('order has been placed')
                }
            },
            computed: {
                cartItemCount: function(){
                    return this.store.length || '';
                },
                canAddToCart: function(){
                    return this.product.availableInventory > this.cartItemCount;
                }
            },
        });
    </script>
</html>